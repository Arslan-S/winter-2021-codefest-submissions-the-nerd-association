<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="style.css">
    <title>The Hunter Nebula | Review Stats | Shostak</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4"></script>
  </head>
  <body>
    <div class="background-box">
        <h1 class="white-text center-text"> The Hunter Nebula </h1>
        
        <div id="nav-bar" class="center-text">
            <a href="https://codefest.huntercs.org/winter-2021-codefest-submissions-the-nerd-association/" target="_self" class="white-text link-size black-box">Home</a>
            <a href="https://codefest.huntercs.org/winter-2021-codefest-submissions-the-nerd-association/review" target="_self" class="white-text link-size black-box">Write Review</a>
            <a href="https://codefest.huntercs.org/winter-2021-codefest-submissions-the-nerd-association/stats" target="_self" class="white-text link-size black-box">Review Stats</a>
        </div>
    </div>
      
    <div class="purple-box-stats">
      <h2 class="white-text center-text">Review Statistics</h2><hr>
      <p class="white-text center-text">The statistical data below comprises all available student evaluations from the past five years to the current year. To view these student evaluations, 
      the viewer would have to verify that they are Hunter College students and will be sent a code to check for authentication. While these are official documents obtained from Hunter, the 
      data displayed here may not be reflected accurately based on the number of responses given in comparison to the actual class size.</p><hr><br>

      <h2 class="white-text center-text">SHOSTAK</h2>

      <script>
        //python -m http.server 8000
        
        lineGraph();
        async function getData(){
            const xVals = [];
            const yVals = [];
            const response = await fetch("professor.json");
            const data = await response.json(); //everything
            //console.log(data);
            const semesters = data.semesters; //just the semesters
            //console.log(semesters);
            for (let term = 0; term < semesters.length; term++) {
                xVals.push(semesters[term].term);
                let courses = semesters[term].classes;//classes per semester
                //console.log(courses);
                let semesterMean = 0;
                for(let course=0; course< courses.length;course++){
                    //average per one class in a semester
                    semesterMean = semesterMean + courses[course].averageScale7[8]; 
                }
                //average divided my total classes 
                yVals.push(semesterMean/(courses.length)); 
                semesterMean = 0; //reset
            }
    
            return {xVals, yVals};
        }
    
        async function lineGraph(){
            const mydata = await getData();
            const ctx = document.getElementById('myChart').getContext('2d');
            const chart = new Chart(ctx, {
                // The type of chart we want to create
                type: 'line',
    
                // The data for our dataset
                data: {
                    labels: mydata.xVals,
                    datasets: [{
                        label: 'Average Overall Evalutaion',
                        backgroundColor: 'rgb(0,0,0)',
                        borderColor: 'rgb(0,0,0)',
                        fill: false,
                        data: mydata.yVals
                    }]
                },
    
                // Configuration options go here
                options: {}
            });
        }
      </script>

      <div class="chart-box center-image">
        <canvas id="myChart"></canvas>
        <span class="white-text">*Scores out of 7</span>
      </div>

      <br><a href="https://codefest.huntercs.org/winter-2021-codefest-submissions-the-nerd-association/stats" target="_self" class="white-text">BACK</a>
    </div>
  </body>
</html>
